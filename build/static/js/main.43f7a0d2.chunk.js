(this["webpackJsonpdiw-frontend"]=this["webpackJsonpdiw-frontend"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports={container:"Signup_container__10bnV",c1:"Signup_c1__3z3Co",img:"Signup_img__3y-3L",c2:"Signup_c2__lHUVP",h1:"Signup_h1__2lnhO",color:"Signup_color__uRXaJ",p:"Signup_p__BmXM0",form:"Signup_form__2GoPL",input:"Signup_input__3cJHd",button:"Signup_button__3AD4C"}},function(e,t,n){e.exports={container:"Login_container__2LJai",c1:"Login_c1__1e4su",img:"Login_img__DEcvA",c2:"Login_c2__1pUjb",h1:"Login_h1__RDvdT",color:"Login_color__m2bwM",p:"Login_p__1PgkV",form:"Login_form__hl749",input:"Login_input__1enYK",button:"Login_button__3WnZB"}},function(e,t,n){e.exports={modal:"Modal_modal__2NT9R",modalmain:"Modal_modalmain__1_K8r",displayblock:"Modal_displayblock__Lk2kF",displaynone:"Modal_displaynone__z5HIW",button:"Modal_button__2VQ0X"}},function(e,t,n){e.exports={Sidebar:"Sidebar_Sidebar__kBbsh",input:"Sidebar_input__2K_-e",toggle:"Sidebar_toggle__2N_a5",img:"Sidebar_img__2g0sD",textarea:"Sidebar_textarea__2veUL"}},function(e,t,n){e.exports={main:"SinglePost_main__G9ctO",post:"SinglePost_post__1qZPD",info:"SinglePost_info__Uj9NM",content:"SinglePost_content__2KsCS"}},function(e,t,n){e.exports={post:"UserPost_post__1MZU3",input:"UserPost_input__1KCoY",textarea:"UserPost_textarea__3OUD8",handlers:"UserPost_handlers__3Zdvo"}},,function(e,t,n){e.exports={add:"AddPost_add__2Fpt7",input:"AddPost_input__zkljv",textarea:"AddPost_textarea__2SAbt"}},function(e,t,n){e.exports={header:"Header_header__26GRD",link:"Header_link__3tjWz",img:"Header_img__9u57-"}},,function(e,t,n){e.exports={container:"Home_container__3OI_Y",jumbo:"Home_jumbo__2FtaM"}},function(e,t,n){e.exports={main:"Posts_main__1OsL3",post:"Posts_post__1HUtE"}},,,function(e,t,n){e.exports={main:"UPosts_main__3gnKM"}},,,,,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(18),s=n.n(o),i=(n(25),n(2)),r=n(19);var l=function(){return!!localStorage.getItem("token")&&(!(Object(r.a)(localStorage.getItem("token")).exp>Date.now())||(localStorage.removeItem("token"),localStorage.removeItem("user"),!1))},j=n(3),d=n.p+"static/media/diya.68aed95b.png",u=n(6),h=n.n(u),b=n(0),m=function(e){var t=Object(a.useState)(),n=Object(j.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(),r=Object(j.a)(s,2),l=r[0],u=r[1],m=Object(a.useState)(),O=Object(j.a)(m,2),p=O[0],g=O[1],x=Object(i.f)();return Object(b.jsxs)("div",{className:h.a.container,children:[Object(b.jsxs)("div",{className:h.a.c1,children:[Object(b.jsxs)("div",{style:{textAlign:"center",marginBottom:0},children:[Object(b.jsx)("h1",{className:h.a.h1,children:Object(b.jsx)("b",{children:"Welcome"})}),Object(b.jsx)("p",{className:h.a.p,children:"Share your diwali experiences and spread joy"})]}),Object(b.jsx)("img",{className:h.a.img,alt:"diya",src:d})]}),Object(b.jsx)("div",{className:h.a.c2,children:Object(b.jsxs)("form",{className:h.a.form,children:[Object(b.jsx)("h1",{className:"".concat(h.a.h1," ").concat(h.a.color),children:"Signup"}),Object(b.jsx)("input",{className:h.a.input,name:"name",type:"text",placeholder:"Enter Name Here",value:p,onChange:function(e){g(e.target.value)}}),Object(b.jsx)("input",{className:h.a.input,name:"roll",type:"number",minLength:"9",maxLength:"9",placeholder:"Enter Roll No. Here",value:c,onChange:function(e){o(e.target.value)}}),Object(b.jsx)("input",{className:h.a.input,name:"password",type:"password",placeholder:"Enter Password Here",value:l,onChange:function(e){u(e.target.value)}}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault(),c<1e8||c>999999999?alert("roll no. must be 9 digits!!"):""===l?alert("password cannot be empty"):""===p?alert("name cannot be empty"):fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{name:p,roll:c,password:l}})}).then((function(e){return e.json()})).then((function(e){!1===e.success?alert(JSON.stringify(e.message)):(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.data)),x("/"),location.reload())})).catch((function(e){alert(e)}))},className:h.a.button,children:"Sign Up"}),Object(b.jsxs)("p",{children:["Already Registered?"," ",Object(b.jsx)("span",{style:{color:"blue",cursor:"pointer"},onClick:function(){return e.setsup(!1)},children:"Sign In"})]})]})})]})},O=n.p+"static/media/anar.f495da8f.png",p=n(7),g=n.n(p),x=function(e){var t=Object(a.useState)(),n=Object(j.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(),r=Object(j.a)(s,2),l=r[0],d=r[1],u=Object(i.f)();return Object(b.jsxs)("div",{className:g.a.container,children:[Object(b.jsx)("div",{className:g.a.c2,children:Object(b.jsxs)("form",{className:g.a.form,children:[Object(b.jsx)("h1",{className:"".concat(g.a.h1," ").concat(g.a.color),children:"Login"}),Object(b.jsx)("input",{className:g.a.input,name:"roll",type:"number",minLength:"9",maxLength:"9",placeholder:"Enter Roll No. Here",value:c,onChange:function(e){o(e.target.value)}}),Object(b.jsx)("input",{className:g.a.input,name:"password",type:"password",placeholder:"Enter Password Here",value:l,onChange:function(e){d(e.target.value)}}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault(),c<1e8||c>999999999?alert("roll no. must be 9 digits!!"):""===l?alert("password cannot be empty"):fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{roll:c,password:l}})}).then((function(e){return e.json()})).then((function(e){!1===e.success?alert(JSON.stringify(e.message)):(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.data)),u("/"),location.reload())})).catch((function(e){alert(e)}))},className:g.a.button,children:"Sign In"}),Object(b.jsxs)("p",{children:["Not Registered?"," ",Object(b.jsx)("span",{style:{color:"blue",cursor:"pointer"},onClick:function(){return e.setsup(!0)},children:"Sign Up"})]})]})}),Object(b.jsxs)("div",{className:g.a.c1,children:[Object(b.jsxs)("div",{style:{textAlign:"center",marginBottom:0},children:[Object(b.jsx)("h1",{className:g.a.h1,children:Object(b.jsx)("b",{children:"Welcome"})}),Object(b.jsx)("p",{className:g.a.p,children:"Share your diwali experiences and spread joy"})]}),Object(b.jsx)("img",{className:g.a.img,alt:"anar",src:O})]})]})},f=n(16),_=n.n(f),S=function(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(b.jsx)("div",{className:_.a.container,children:Object(b.jsx)("div",{className:_.a.jumbo,children:n?Object(b.jsx)(m,{setsup:c}):Object(b.jsx)(x,{setsup:c})})})},v=n(13),N=n.n(v),y=n(8),k=n.n(y),C=function(e){var t=e.show?"".concat(k.a.modal," ").concat(k.a.displayblock):"".concat(k.a.modal," ").concat(k.a.displaynone);return Object(b.jsx)("div",{className:t,children:Object(b.jsxs)("section",{className:k.a.modelmain,children:[e.children,Object(b.jsx)("button",{className:k.a.button,type:"button",onClick:e.handleClose,children:"CLose"}),Object(b.jsx)("button",{className:k.a.button,type:"button",onClick:e.handleSubmit,children:"Submit"})]})})},w=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(),s=Object(j.a)(o,2),r=s[0],d=s[1],u=Object(a.useState)(),h=Object(j.a)(u,2),m=h[0],O=h[1],p=function(){c(!n)},g=Object(i.f)(),x=function(){localStorage.removeItem("user"),localStorage.removeItem("token"),g("/"),location.reload()};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{onClick:p,className:N.a.add,children:"+"}),Object(b.jsxs)(C,{show:n,handleClose:p,handleSubmit:function(e){e.preventDefault(),l()?""===r?alert("Title cannot be empty!!"):""===m?alert("content cannot be empty"):fetch("/blog",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({data:{title:r,content:m}})}).then((function(e){return e.json()})).then((function(e){!1===e.success?alert(JSON.stringify(e.message)):g("/post/"+e.data._id)})).catch((function(e){alert(e)})):(alert("Not Authenticated!"),x())},children:[Object(b.jsx)("h1",{children:"Add Post"}),Object(b.jsxs)("form",{style:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)("input",{name:"title",placeholder:"Title here",value:r,onChange:function(e){d(e.target.value)},className:N.a.input}),Object(b.jsx)("textarea",{name:"content",rows:"5",placeholder:"Content here",value:m,onChange:function(e){O(e.target.value)},className:N.a.textarea})]})]})]})},I=n(4),D=n.p+"static/media/logo.c45d5abf.png",L=n(14),P=n.n(L),T=function(){return Object(b.jsx)("div",{className:P.a.header,children:Object(b.jsx)(I.b,{to:"/",style:{textDecoration:"none"},children:Object(b.jsx)("div",{className:P.a.link,children:Object(b.jsx)("img",{className:P.a.img,alt:"logo",src:D})})})})},A=n(17),E=n.n(A),J=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(i.f)();return Object(a.useEffect)((function(){l()?fetch("/blog/",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){!1===e.success?"Not Found"!==e.message&&alert(JSON.stringify(e.message)):c(e.data)})).catch((function(e){alert(e)})):(alert("Not Authenticated!"),localStorage.removeItem("user"),localStorage.removeItem("token"),o("/"),location.reload())}),[o]),Object(b.jsx)("div",{className:E.a.main,children:n.map((function(e){return Object(b.jsxs)("div",{onClick:function(){return o("/post/"+e._id)},className:E.a.post,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("h1",{children:Object(b.jsx)("i",{style:{textDecoration:"underline dashed red"},children:e.title})}),Object(b.jsx)("p",{children:new Date(e.time).toLocaleDateString()}),Object(b.jsx)("p",{children:new Date(e.time).toLocaleTimeString()})]}),Object(b.jsxs)("span",{children:[Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("h2",{children:e.authorName}),Object(b.jsx)("p",{children:e.authorRoll})]})]},e._id)}))})},H=n(9),U=n.n(H),B=n.p+"static/media/avatar.624bb665.png",z=function(){var e,t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(null),r=Object(j.a)(s,2),d=r[0],u=r[1],h=Object(a.useState)(null),m=Object(j.a)(h,2),O=m[0],p=m[1],g=Object(a.useState)(null),x=Object(j.a)(g,2),f=x[0],_=x[1],S=Object(a.useState)(!1),v=Object(j.a)(S,2),N=v[0],y=v[1],k=function(){o(!c)};e=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{name:"name",roll:"12345678"};var w=Object(i.f)(),I=function(){localStorage.removeItem("user"),localStorage.removeItem("token"),w("/"),location.reload()};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{style:{display:screen.width<768?N?"flex":"none":"flex"},className:U.a.Sidebar,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:e.name}),Object(b.jsx)("p",{children:e.roll})]}),Object(b.jsx)("img",{className:U.a.img,alt:"avatar",src:B}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h4",{onClick:function(){return w("/posts")},children:"Your Posts \u2728"}),Object(b.jsx)("h4",{onClick:k,children:"Edit Profile \u270d"}),Object(b.jsx)("h4",{onClick:function(t){t.preventDefault(),l()?fetch("/user/"+e.roll,{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){!1===e.success?(console.log(e),alert(JSON.stringify(e.message))):I()})).catch((function(e){alert(e)})):(alert("Not Authenticated!"),I())},children:"Delete \u26d4"}),Object(b.jsx)("h4",{onClick:I,children:"Logout \u270b"}),Object(b.jsx)("br",{}),Object(b.jsx)("br",{})]})]}),Object(b.jsx)("div",{onClick:function(){return y(!N)},className:U.a.toggle,children:N?"X":"="}),Object(b.jsxs)(C,{show:c,handleClose:k,handleSubmit:function(t){if(t.preventDefault(),l())if(null==d&&null==O&&null==f)alert("Edit atleast one field or otherwise close!");else{var n={};null!=d&&(n.name=d),null!=O&&(n.roll=O),null!=f&&(n.pass=f),fetch("/user/".concat(e.roll),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({data:n})}).then((function(e){return e.json()})).then((function(e){!1===e.success?alert(JSON.stringify(e.message)):(localStorage.setItem("user",JSON.stringify(e.data)),w("/"),location.reload())})).catch((function(e){alert(e)}))}else alert("Not Authenticated!"),I()},children:[Object(b.jsx)("h1",{children:"Edit Profile Info"}),Object(b.jsxs)("form",{style:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)("input",{name:"name",placeholder:"To edit name",value:d,onChange:function(e){u(e.target.value)},className:U.a.input}),Object(b.jsx)("input",{name:"roll",placeholder:"To edit Roll",type:"number",value:O,onChange:function(e){p(e.target.value)},className:U.a.input}),Object(b.jsx)("input",{name:"pass",placeholder:"To edit password",type:"password",value:f,onChange:function(e){_(e.target.value)},className:U.a.input})]})]})]})},F={container:{minWidth:"100%",minHeight:"100vh",backgroundColor:"#121212",color:"white"}},M=function(){return Object(b.jsxs)("div",{style:F.container,children:[Object(b.jsx)(T,{}),Object(b.jsx)(z,{}),Object(b.jsx)(w,{}),Object(b.jsx)(J,{})]})},R=n(10),W=n.n(R),G=function(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),c=n[0],o=n[1],s=e.id,r=Object(i.f)();return Object(a.useEffect)((function(){l()?fetch("/blog/"+s,{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){!1===e.success?alert(JSON.stringify(e.message)):o(e.data[0])})).catch((function(e){alert(e)})):(alert("Not Authenticated!"),localStorage.removeItem("user"),localStorage.removeItem("token"),r("/"),location.reload())}),[s,r]),Object(b.jsx)("div",{className:W.a.main,children:Object(b.jsxs)("div",{className:W.a.post,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("h1",{children:c.title}),Object(b.jsxs)("div",{className:W.a.info,children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:new Date(c.time).toLocaleDateString()}),Object(b.jsx)("p",{children:new Date(c.time).toLocaleTimeString()})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:Object(b.jsx)("b",{children:c.authorName})}),Object(b.jsx)("p",{children:c.authorRoll})]})]})]}),Object(b.jsx)("hr",{style:{width:"100%"}}),Object(b.jsxs)("span",{children:[Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),Object(b.jsx)("p",{className:W.a.content,children:c.content})]})]})})},K={container:{minWidth:"100%",minHeight:"100vh",backgroundColor:"#121212",color:"white"}},Y=function(){var e=Object(i.g)().id;return Object(b.jsxs)("div",{style:K.container,children:[Object(b.jsx)(T,{}),Object(b.jsx)(z,{}),Object(b.jsx)(G,{id:e})]})},V=n(11),X=n.n(V),Z=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(e.element.title),r=Object(j.a)(s,2),d=r[0],u=r[1],h=Object(a.useState)(e.element.content),m=Object(j.a)(h,2),O=m[0],p=m[1],g=function(){console.log(c),o(!c),console.log(c)},x=Object(i.f)(),f=function(){localStorage.removeItem("user"),localStorage.removeItem("token"),x("/"),location.reload()};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:X.a.post,children:[Object(b.jsxs)("div",{onClick:function(){return x("/post/"+e.element._id)},children:[Object(b.jsx)("h1",{children:Object(b.jsx)("i",{style:{textDecoration:"underline dashed red"},children:e.element.title})}),Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:new Date(e.element.time).toLocaleDateString()}),Object(b.jsx)("p",{children:new Date(e.element.time).toLocaleTimeString()})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:Object(b.jsx)("b",{children:e.element.authorName})}),Object(b.jsx)("p",{children:e.element.authorRoll})]})]})]}),Object(b.jsxs)("div",{className:X.a.handlers,children:[Object(b.jsx)("span",{onClick:g,children:"Edit"}),Object(b.jsx)("span",{onClick:function(t){t.preventDefault(),l()?""===d?alert("Title cannot be empty!!"):""===O?alert("content cannot be empty"):fetch("http://localhost:8000/blog/"+e.element._id,{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){!1===e.success?alert(JSON.stringify(e.message)):x("/posts")})).catch((function(e){alert(e)})):(alert("Not Authenticated!"),f())},children:"Delete"})]})]},e.element._id),Object(b.jsxs)(C,{show:c,handleClose:g,handleSubmit:function(t){t.preventDefault(),l()?""===d?alert("Title cannot be empty!!"):""===O?alert("content cannot be empty"):fetch("/blog/"+e.element._id,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({data:{title:d,content:O}})}).then((function(e){return e.json()})).then((function(e){!1===e.success?alert(JSON.stringify(e.message)):x("/post/"+e.data._id)})).catch((function(e){alert(e)})):(alert("Not Authenticated!"),f())},children:[Object(b.jsx)("h1",{children:"Edit Post"}),Object(b.jsxs)("form",{style:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)("input",{name:"title",placeholder:"Title here",value:d,onChange:function(e){u(e.target.value)},className:X.a.input}),Object(b.jsx)("textarea",{name:"content",rows:"5",placeholder:"Content here",value:O,onChange:function(e){p(e.target.value)},className:X.a.textarea})]})]})]})},q=n(20),Q=n.n(q),$=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],o=Object(i.f)();return Object(a.useEffect)((function(){l()?fetch("/userblogs",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){!1===e.success?"Not Found"===e.message?alert("You have 0 posts"):alert(JSON.stringify(e.message)):c(e.data)})).catch((function(e){alert(e)})):(alert("Not Authenticated!"),localStorage.removeItem("user"),localStorage.removeItem("token"),o("/"),location.reload())}),[o]),Object(b.jsx)("div",{className:Q.a.main,children:n.map((function(e){return Object(b.jsx)(Z,{element:e},e._id)}))})},ee={container:{minWidth:"100%",minHeight:"100vh",backgroundColor:"#121212",color:"white"}},te=function(){return Object(b.jsxs)("div",{style:ee.container,children:[Object(b.jsx)(T,{}),Object(b.jsx)(z,{}),Object(b.jsx)(w,{}),Object(b.jsx)($,{})]})};var ne=function(){return l()?Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",element:Object(b.jsx)(M,{})}),Object(b.jsx)(i.a,{path:"/posts",element:Object(b.jsx)(te,{})}),Object(b.jsx)(i.a,{path:"/post/:id",element:Object(b.jsx)(Y,{})})]}):Object(b.jsx)(i.c,{children:Object(b.jsx)(i.a,{exact:!0,path:"/",element:Object(b.jsx)(S,{})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(I.a,{children:Object(b.jsx)(ne,{})})}),document.getElementById("root")),ae()}],[[27,1,2]]]);
//# sourceMappingURL=main.43f7a0d2.chunk.js.map